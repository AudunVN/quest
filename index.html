<!DOCTYPE html>
<html>
	<head>
		<meta name="robots" content="noindex, nofollow">
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
		<meta name="viewport" content="width=680, initial-scale=1, user-scalable=yes">
		<title>Quest</title>
		<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<style>
			@font-face {
				font-family: unifont;
				src: url("https://24e3021dd42ba493ca4b980e89f1158d0706cb0f.googledrive.com/host/0B-jbiuTm6FjRVUdKSWRnRFlLS0k/unifont-8.0.01.ttf");
			}
			
			html {
				background: black;
			}

			.appContainer {
				position: absolute;
				background-color: #001;
				margin: 0 auto;
				border: 2px solid #13B;
				padding: 0.5em;
				font-family: "Unifont", sans-serif;
				font-size: 16px;
				color: white;
				left: 0.25em;
				right: 0.25em;
				bottom: 0.25em;
				top: 0.25em;
				min-height: 600px;
				min-width: 600px;
			}
		</style>
	</head>
	<body>
		<div class="appContainer calendarActive">
			<div class="notifier"></div>
			<nav class="tabber">
				<div class="logo"></div>
				<ul>
					<li>home</li>
					<li>calendar</li>
					<li>notes</li>
					<li>rss/news</li>
					<li>geodata</li>
					<li>tools</li>
				</ul>
			</nav>
			<div class="tabs">
				<div class="home">
					<!-- text summary -->
				</div>
				<div class="calendar">
					<!-- gcal embed -->
					<iframe></iframe>
				</div>
				<div class="notes">
					<!-- gdocs embed -->
					<iframe></iframe>
				</div>
				<div class="rss">
					<!-- js rss: https://developers.google.com/feed/ -->
					<!-- actually, this is probably a bit optimistic as GFeeds is dead. Alternatives? -->
				</div>
				<div class="geodata">
					<!-- HowIs, local/remote geodata lookup -->
				</div>
				<div class="tools">
					<!-- misc. useful things, user-defined code -->
				</div>
			</div>
			<div class="ticker"><!-- text summary --></div>
		</div>
		<script>
			$(document).ready(function(){
				var updateRate = 250;
				var updateThrottle = 10000;
				var configFile = "config.json";
				var parsedConfig;
				
				function log(terminalIdentifier, outputString, timestamp) {
					$(terminalIdentifier).prepend('<div class="outputLine"><span class="timestamp">'+timestamp+'</span> <span class="output">'+outputString+'</span></div>');
					$(terminalIdentifier).animate({scrollTop:$(terminalIdentifier)[0].scrollHeight}, 1000);
				}
				
				function loadConfig() {
					$.get(configFile).success(function(data) {
						parsedConfig = $.parseJSON(data);
						var calendarURL = parsedConfig.calendarURL;
						var notepadURL = parsedConfig.notepadURL;
					}).error(function(jqXHR, textStatus, errorThrown) {
						updateThrottle = 10000;
						log(".term","Interface update failed: Unable to connect, error code "+textStatus+" "+errorThrown+". Retrying in ten seconds.","&nbsp;>");
					});
				}
				
				var updateTimer;
				
				function updateInterface() {
					var d = new Date();
					var n = d.getHours();
					if (n >= 22 || n < 5) {
						// If time is between 2200 - 0500 night theme to 'body'
						document.body.className = "night";
					}
					else if (n >= 5 && n < 6) {
						// If time is between 0500 - 0600 morning theme to 'body'
						document.body.className = "morning";
					}
					else if (n >= 6 && n < 9) {
						// If time is between 0600 - 0900 lateMorning theme to 'body'
						document.body.className = "lateMorning";
					}
					else if (n >= 16 && n < 18) {
						// If time is between 1600 - 1800 evening theme to 'body'
						document.body.className = "lateAfternoon";
					}
					else if (n >= 18 && n < 20) {
						// If time is between 1800 - 2000 sunset theme to 'body'
						document.body.className = "evening";
					}
					else if (n >= 20 && n < 22) {
						// If time is between 2000 - 2200 lateEvening theme to 'body'
						document.body.className = "lateEvening";
					}
					else {
						// Else use 'day' theme
						document.body.className = "afternoon";
					}
					
					updateTimer = setTimeout(function(){ updateInterface(); }, updateRate+updateThrottle);
				}
			});

		</script>
	</body>
</html>
